<div fxFlex fxLayout="column">
  <div fxFlex fxLayout fxFill fxLayoutAlign="center center">
    <mat-spinner *ngIf="isLoading$ | async"></mat-spinner>
  </div>
  <h2 style="text-align: center">Orders</h2>
  <mat-accordion multi="true" *ngIf="!(isLoading$ | async)">
    <div *ngFor="let order of orders$ | async">
      <mat-expansion-panel multi>
        <mat-expansion-panel-header>
          <mat-panel-title fxLayoutAlign="flex-start center"
            >Order ID: {{ order.orderId }}
          </mat-panel-title>
          <mat-panel-description fxLayoutAlign="space-between center">
            <p fxLayoutAlign="flex-start">
              Order from : {{ order.hotel.hotelName }}
            </p>
            <p>Amount: Rs. {{ order.grandTotal }}</p>
          </mat-panel-description>
        </mat-expansion-panel-header>
        <div *ngFor="let items of order.orderItems">
          <p>
            {{ items.item.itemName }} x {{ items.quantity }} = Rs.
            {{ items.amount }}
          </p>
        </div>
        <div *ngIf="!(isAdmin$ | async) && !(isVendor$ | async)">
          <p>Order Status : {{ order.status }}</p>
        </div>
        <mat-form-field *ngIf="(isAdmin$ | async) || (isVendor$ | async)">
          <mat-radio-group
            aria-label="Select an option"
            [(ngModel)]="newStatus"
          >
            <mat-radio-button *ngFor="let stat of status" [value]="stat">{{
              stat
            }}</mat-radio-button>
          </mat-radio-group>
        </mat-form-field>
        <mat-action-row *ngIf="(isAdmin$ | async) || (isVendor$ | async)">
          <button
            mat-button
            color="primary"
            (click)="updateStatus(order.orderId)"
          >
            Update Status
          </button>
        </mat-action-row>
      </mat-expansion-panel>
    </div>
  </mat-accordion>
</div>
